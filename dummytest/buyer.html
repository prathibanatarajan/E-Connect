<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>E-Connect — Buyer</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family:'Segoe UI',sans-serif; background:#f0fff4; padding:20px; }
    .card { max-width:500px; margin:50px auto; background:#fff; padding:30px; border-radius:16px; box-shadow:0 12px 25px rgba(0,0,0,0.15); }
    h2 { color:#28a745; margin-bottom:20px; text-align:center; }
    input, textarea { width:100%; padding:12px; margin:8px 0; border-radius:12px; border:1px solid #ccc; }
    button { width:100%; padding:12px; border:none; border-radius:12px; background:linear-gradient(90deg,#28a745,#007BFF); color:#fff; font-size:16px; cursor:pointer; margin-top:10px; }
    button:hover { transform:translateY(-2px); }
    .small { font-size:12px; color:#555; margin-top:6px; }
  </style>
</head>
<body>

  <div class="card">
    <h2>Buyer / Collector — Register</h2>
    <form id="buyerForm">
      <input id="buyerName" placeholder="Name" required />
      <textarea id="buyerDesc" placeholder="Description about you (vehicle, experience)"></textarea>
      <input id="buyerArea" placeholder="Area / Locality" required />
      <button type="submit">Register</button>
      <div id="buyerMessage" class="small"></div>
    </form>
  </div>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBmSgmm9fRhc3RTk0MlIH0JVljM3-k4K60",
    authDomain: "e-waste-collector-48321.firebaseapp.com",
    projectId: "e-waste-collector-48321",
    storageBucket: "e-waste-collector-48321.appspot.com",
    messagingSenderId: "286213543436",
    appId: "1:286213543436:web:4bcea05421a0614b8f8029"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const buyerForm = document.getElementById('buyerForm');
  const buyerMessage = document.getElementById('buyerMessage');

  buyerForm.addEventListener('submit', async e => {
    e.preventDefault();
    try {
      const name = document.getElementById('buyerName').value.trim();
      const description = document.getElementById('buyerDesc').value.trim();
      const area = document.getElementById('buyerArea').value.trim();

      await addDoc(collection(db,"ewaste_buyers"),{
        name, description, area, createdAt:serverTimestamp()
      });

      buyerMessage.textContent = "Registered successfully!";
      buyerForm.reset();
    } catch(err){
      buyerMessage.textContent = "Error: "+(err.message || err);
      console.error(err);
    }
  });
  </script>

</body>
</html>

